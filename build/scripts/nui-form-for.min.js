var nuiPrefix=nuiPrefix||"nui",nuiFormFor=angular.module(nuiPrefix+"-form-for",[]);!function(){"use strict";var e={required:"ng-required",minlength:"ng-minlength",maxlength:"ng-maxlength",min:"min",max:"max",pattern:"pattern",type:"type"},t=["$scope","$element","$attrs","$http","$q","$compile",function(t,r,n,i,a,u){this.compile=function(e){u(e)(t)},this.getValidationRule=function(){var e=a.defer();if("object"==typeof t.validationRule)e.resolve(t.validationRule);else{var r=n.validationRule;i.get(r).then(function(t){e.resolve(t.data)})}return e.promise},this.injectValidationRule=function(t){var i=r[0],a=n[nuiPrefix+"FormFor"];for(var u in t)for(var o="input[name=VAL], select[name=VAL], textarea[name=VAL]",l=o.replace(/VAL/,'"'+u+'"'),m=i.querySelectorAll(l),f=t[u],g=0;g<m.length;g++){var s=m[g];if(s.getAttribute("ng-model"));else{s.setAttribute("ng-model",a+"."+u),f.required=f.required||"true";for(var c in f){var v=e[c],d=f[c];s.getAttribute(v)||d&&("object"==typeof d&&(d=d.value),s.setAttribute(v,d))}this.compile(s)}}},this.injectErrorMessages=function(e){var n=r[0].getAttribute("name");for(var i in e){var a={},u=e[i].message;u&&(a.general=u);for(var o in e[i]){var l=e[i][o];"object"==typeof l&&l.message&&(a[o]=l.message)}Object.keys(a).length>0&&(t[n][i].message=a)}}}];nuiFormFor.directive(nuiPrefix+"FormFor",function(){return{controller:t,link:function(e,t,r,n){var i=t[0],a=i.getAttribute("name");return a&&"FORM"===i.tagName?(i.setAttribute("novalidate",""),void n.getValidationRule().then(function(e){return n.injectValidationRule(e),e}).then(function(e){n.injectErrorMessages(e)})):!1}}})}(),function(){"use strict";var e={required:"ng-required",minlength:"ng-minlength",maxlength:"ng-maxlength",min:"min",max:"max",pattern:"pattern",type:"type"};nuiFormFor.directive(nuiPrefix+"Rule",function(t){return{require:"ngModel",link:function(r,n,i){var a=n[0],u=(i.ngRule||i.name,r.validationRule[i[nuiPrefix+"Rule"]]);u.required=u.required||"true";for(var o in u){var l=e[o],m=u[o];a.getAttribute(l)||m&&("object"==typeof m&&(m=m.value),a.setAttribute(l,m))}a.removeAttribute(nuiPrefix+"-rule"),t(a)(r)}}})}();