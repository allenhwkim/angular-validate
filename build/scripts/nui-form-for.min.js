var nuiFormFor=angular.module("nui-form-for",[]);!function(){"use strict";var e={required:"ng-required",minlength:"ng-minlength",maxlength:"ng-maxlength",min:"min",max:"max",pattern:"pattern",type:"type"},t=["$scope","$element","$attrs","$http","$q","$compile",function(t,n,r,i,a,u){this.compile=function(e){u(e)(t)},this.getValidationRule=function(){var e=a.defer();if("object"==typeof t.validationRule)e.resolve(t.validationRule);else{var n=r.validationRule;i.get(n).then(function(t){e.resolve(t.data)})}return e.promise},this.injectValidationRule=function(t){var i=n[0],a=r.nuiFormFor;for(var u in t)for(var o="input[name=VAL], select[name=VAL], textarea[name=VAL]",l=o.replace(/VAL/,'"'+u+'"'),m=i.querySelectorAll(l),g=t[u],s=0;s<m.length;s++){var c=m[s];if(c.getAttribute("ng-model"));else{c.setAttribute("ng-model",a+"."+u),g.required=g.required||"true";for(var v in g){var f=e[v],d=g[v];c.getAttribute(f)||d&&("object"==typeof d&&(d=d.value),c.setAttribute(f,d))}this.compile(c)}}},this.injectErrorMessages=function(e){var r=n[0].getAttribute("name");for(var i in e){var a={},u=e[i].message;u&&(a.general=u);for(var o in e[i]){var l=e[i][o];"object"==typeof l&&l.message&&(a[o]=l.message)}Object.keys(a).length>0&&(t[r][i].message=a)}}}];nuiFormFor.directive("nuiFormFor",function(){return{controller:t,link:function(e,t,n,r){var i=t[0],a=i.getAttribute("name");return a&&"FORM"===i.tagName?(i.setAttribute("novalidate",""),void r.getValidationRule().then(function(e){return r.injectValidationRule(e),e}).then(function(e){r.injectErrorMessages(e)})):!1}}})}(),function(){"use strict";var e={required:"ng-required",minlength:"ng-minlength",maxlength:"ng-maxlength",min:"min",max:"max",pattern:"pattern",type:"type"};nuiFormFor.directive("nuiRule",function(t){return{require:"ngModel",link:function(n,r,i){var a=r[0],u=(i.ngRule||i.name,n.validationRule[i.nuiRule]);u.required=u.required||"true";for(var o in u){var l=e[o],m=u[o];a.getAttribute(l)||m&&("object"==typeof m&&(m=m.value),a.setAttribute(l,m))}a.removeAttribute("nui-rule"),t(a)(n)}}})}();